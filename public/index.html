<!DOCTYPE html>
<html lang="ar">

<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6308708380323883"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>الكلمة أونلاين</title>


  <!--Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="https://arabicwordle.herokuapp.com">
<meta name="twitter:creator" content="@rayed9o9">
<meta name="twitter:title" content="اتحداك تحل كلمتي">
<meta name="twitter:description" content="هل تقدر تحل كلمتي السرية؟">
<meta name="twitter:image" content="https://imgtr.ee/images/2023/04/12/nFaJ3.png">
  <!--Facebook-->
  <meta property="og:title" content='اتحداك تحل كلمتي' />
  <meta property="og:image" content='https://imgtr.ee/images/2023/04/12/nFaJ3.png'/>
  <meta property="og:description" content='هل تقدر تحل كلمتي السرية؟' />
  <meta property="og:url" content='https://arabicwordle.herokuapp.com' />
  <meta property='og:image:width' content='1200' />
  <meta property='og:image:height' content='382' />
  <!-- TYPE BELOW IS PROBABLY: 'website' or 'article' or look on https://ogp.me/#types -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  
</head>

<body>


  <div id="wrapper" class="center">
    <div id="header">
      <div class="absleft">

        <a href="shareyourword.html">
          <button id="hardmodebutton" class="smallbutton" alt="أكتب كلمتك الخاصة" title="أكتب كلمتك الخاصة">
            <p class="material-icons">share</p>
          </button>
        </a>
      </div>

      <div class="absright">
        <form action="https://twitter.com/rayed9o9" target="_blank" alt="hi?" title="hi?">
          <button class="smallbutton">
            <p class="material-icons">group_add</p>
          </button>
        </form>
        <a href="https://donate.stripe.com/test_28og1a9jugI1eFW5kk">
          <button class="smallbutton" alt="Do like the game?" title="Do like the game?">
            <p class="material-icons">handshake</p>
          </button>
        </a>
      </div>

      <h1>الكلمة أونلاين</h1>

    </div>

    <hr />
    <table id="numbers" class="center">
      <tr id="row0">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row1">
        <td style="--animation-order: 1" id="td4"></td>
        <td style="--animation-order: 1" id="td3"></td>
        <td style="--animation-order: 1" id="td2"></td>
        <td style="--animation-order: 1" id="td1"></td>
        <td style="--animation-order: 1" id="td0"></td>
      </tr>
      <tr id="row2">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row3">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row4">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row5">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row6">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
      <tr id="row7">
        <td style="--animation-order: 0" id="td4"></td>
        <td style="--animation-order: 0" id="td3"></td>
        <td style="--animation-order: 0" id="td2"></td>
        <td style="--animation-order: 0" id="td1"></td>
        <td style="--animation-order: 0" id="td0"></td>
      </tr>
    </table>
    <div id="numpad"></div>
  </div>
  <div id="messages" class="flex">
    <div id="about" class="">
      <div class="absright">
        <button class="smallbutton" onclick="togglePanel('about', 'none')">
          <p class="material-icons">close</p>
        </button>
      </div>

      <span dir="rtl">لعبة الورد أونلاين هي فكرة مقتبسة من اللعبة الشهيرة <a href="http://">wordle</a> لكن بدلاً من
        الانتظار 24 ساعة <br> لكل كلمة، هنا من الممكن توليد الكلمات لأصدقائك عبر <a href="shareyourword.html">النقر
          هنا</a> وارسال رابط المشاركة. </span> <br /><br />
      <table>
        <tr>
          <td>
            <p>ص</p>
          </td>
          <td>
            <p>ة</p>
          </td>
          <td>
            <p>ث</p>
          </td>
          <td class="green">
            <p>و</p>
          </td>
          <td>
            <p>ض</p>
          </td>
        </tr>
      </table>
      <br /><br />
      اللون الأخضر يعني ان مكان الحرف صحيح<br /><br />
      <table>
        <tr>
          <td class="right">
            <p>ط</p>
          </td>
          <td>
            <p>ق</p>
          </td>
          <td class="left">
            <p>ط</p>
          </td>
          <td class="green">
            <p>و</p>
          </td>
          <td>
            <p>م</p>
          </td>
        </tr>
      </table>
      <br /><br />
      الأصفر صحيح لكن مكانه خطأ<br /><br />

      <table>
        <tr>
          <td class="green">
            <p>ر</p>
          </td>
          <td class="green">
            <p>ط</p>
          </td>
          <td class="right">
            <p>خ</p>
          </td>
          <td class="green">
            <p>و</p>
          </td>
          <td>
            <p>ب</p>
          </td>
        </tr>
      </table>
      <br /><br />
    
      Code:
      <a href="https://twitter.com/rayed9o9" target="_blank">Raed</a><br /><br />
    </div>
    <div id="winner" class="abscenter">
      <div class="absright">
        <button class="smallbutton" onclick="togglePanel('winner', 'none')">
          <p class="material-icons">close</p>
        </button>
      </div>
      <h1>Winner!</h1>
      <p id="sharedata">
        &#x2B1B;&#x2B1B;&#x1F7E9;&#x1F7E9;&#x2B1B;<br />&#x2B1B;&#x2B1B;&#x2B1B;&#x2B1B;&#x2B1B;<br />&#x1F7E9;&#x1F7E9;&#x1F7E9;&#x1F7E9;&#x1F7E9;<br />
      </p>
      <br />
      <button id="sharebutton">Share</button>
    </div>

    <span id="hardmodenotification">Hardmode ON!</span>
  </div>
  <script type="text/javascript" src="crypto-js/crypto-js.js"></script>
  <script type="text/javascript">

    let url = window.location.search.substr(1);
    console.log(url);

    console.log(CryptoJS.AES.encrypt("خواطر", "iknowUknow").toString());
    let bytes = CryptoJS.AES.decrypt(
      url,
      "iknowUknow"
    );

    let end_game = false;
    let win = false;
    let row = 0;
    let coll = 0;
    let guess = bytes.toString(CryptoJS.enc.Utf8);
    console.log(guess.length);
    if (guess.length > 5 || guess.length < 5){
      window.location.replace("/shareyourword.html");
    } 
    let user_guess = "";
    let keyboard = "ضصثقفغعهخحجدشسيبلاتنمكطئءؤرىةوزظ";
    let current_green = 0;

    function togglePanel(element, display) {
      document.getElementById(element).style.display = display;
      if (display == "block") display = "flex";
      document.getElementById(element).parentElement.style.display = display;

      for (let k = 0; k <= keyboard.length - 1; k++) {
        numpad.innerHTML += `<button id="key${k}" onclick="addNumber('${keyboard.charAt(
          k
        )}',${k})"><p>${keyboard.charAt(k)}  </p></button>`;
      }
      numpad.innerHTML += `<br/><button onclick="removeNumber()"><p class="material-icons">backspace</p></button>`;
      numpad.innerHTML += `<button onclick="submitNumber()"><p class="material-icons">keyboard_return</p></button>`;
    }


    function addNumber(value, key) {
      if (coll >= 5 || row >= 8) return;
      if (current_green > 4) return;

      let table = document.querySelector("#numbers");

      table
        .querySelector(`#row${row}`)
        .querySelector(`#td${coll}`).innerHTML = `<p>${value}</p>`;
      coll++;
    }

    function removeNumber() {
      if (coll > 0) {
        coll--;
        let table = document.querySelector("#numbers");
        table
          .querySelector(`#row${row}`)
          .querySelector(`#td${coll}`).innerHTML = `<p></p>`;
        console.log(
          table.querySelector(`#row${row}`).querySelector(`#td${coll}`)
        );
      } else {
        return;
      }
    }


    let alerted = false;
    function submitNumber() {
      if(alerted){
        return;
      }
      if(row >= 8){
        return;
      }
      if (current_green > 4) {
        alert(`الكلمة هي : ${guess}`);
        alerted = true;
        return;
      }
      
      if (coll == 5) {
        let table = document.querySelector("#numbers");
        let submit_row = table.querySelector(`#row${row}`);
        for (var i = 0; i < 5; i++) {
          if (
            submit_row.querySelector(`#td${i}`).textContent == guess.charAt(i)
          ) {
            submit_row.querySelector(`#td${i}`).className = "green";
            document.querySelector(
              `#key${keyboard.search(
                submit_row.querySelector(`#td${i}`).textContent
              )}`
            ).className = "green";
            current_green++;
            if(current_green > 4){
              alert(`احسنت، الكلمة هي : ${guess}`);
              alerted = true;
              return;
            }
          } else if (
            guess.search(submit_row.querySelector(`#td${i}`).textContent) !=
            -1
          ) {
            submit_row.querySelector(`#td${i}`).className = "left";
            document.querySelector(
              `#key${keyboard.search(
                submit_row.querySelector(`#td${i}`).textContent
              )}`
            ).className = "gold";
            current_green = 0;
          } else {
            submit_row.querySelector(`#td${i}`).className = "gray";
            document.querySelector(
              `#key${keyboard.search(
                submit_row.querySelector(`#td${i}`).textContent
              )}`
            ).className = "gray";
            current_green = 0;
          }
        }

        row++;
        if(row >= 8){
        alert(` الكلمة هي : ${guess}`);
        return;
      }
        coll = 0;
      } else {
        return;
      }
    }
  </script>
</body>

</html>